# This is a basic workflow to help you get started with Actions

name: Packer build AMI for Cloud Development Environment

on:
  push:
    tags:
    - '*'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Packer GitHub Actions
        uses: hashicorp/packer-github-actions@v0.2.0
        with:
          # command to execute
          command: build
          target: aws.pkr.hcl
          arguments: -force -var aws_access_key="${{ secrets.aws_access_key }}" -var aws_secret_key="${{ secrets.aws_secret_key }}" -var glueops_codespaces_container_tag=v0.32.0-alpha4
